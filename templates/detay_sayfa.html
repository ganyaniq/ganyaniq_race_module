<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title id="page-title">Detay Sayfa - GANYAN IQ</title>
  <meta name="description" content="Detaylı analiz ve bilgiler sayfası." />
  <meta property="og:title" content="Detay Sayfa - GANYAN IQ" />
  <meta property="og:description" content="Detaylı analiz ve bilgiler sayfası." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="" id="og-url" />
  <meta property="og:image" content="https://www.ganyaniq.com/static/img/seo-share-image.jpg" />
  <link rel="stylesheet" href="/static/css/main.css" />
</head>
<body>
  <header>
    <nav id="menu"></nav>
  </header>

  <main>
    <h1 id="detay-baslik"></h1>
    <div id="detay-icerik"></div>

    <!-- Sosyal paylaşım butonları -->
    <section id="social-share" style="margin-top: 20px;">
      <h2>Sayfayı Paylaş</h2>
      <a href="#" id="share-facebook" target="_blank">Facebook</a> |
      <a href="#" id="share-twitter" target="_blank">Twitter</a> |
      <a href="#" id="share-linkedin" target="_blank">LinkedIn</a>
    </section>
  </main>

  <footer>
    <p>© 2025 GANYAN IQ</p>
  </footer>

  <script>
    async function loadDetay() {
      const slug = window.location.pathname.split('/').pop();
      const res = await fetch(`/api/detay/${slug}`);
      const data = await res.json();

      document.getElementById('detay-baslik').textContent = data.name;
      document.title = data.name + " - GANYAN IQ";
      document.getElementById('page-title').textContent = document.title;
      document.getElementById('og-url').setAttribute('content', window.location.href);

      let contentHTML = `
        <p>${data.description}</p>
        <ul>
          <li>Geçmiş Koşular: ${data.gecmis_kosular.join(', ')}</li>
          <li>AGF Değeri: ${data.agf}</li>
          <li>Son Yarış Sonucu: ${data.son_sonuc}</li>
        </ul>
      `;

      document.getElementById('detay-icerik').innerHTML = contentHTML;
    }
    loadDetay();

    // Sosyal paylaşım linkleri oluşturma
    function setShareLinks() {
      const pageUrl = encodeURIComponent(window.location.href);
      const pageTitle = encodeURIComponent(document.title);

      document.getElementById('share-facebook').href = `https://www.facebook.com/sharer/sharer.php?u=${pageUrl}`;
      document.getElementById('share-twitter').href = `https://twitter.com/intent/tweet?url=${pageUrl}&text=${pageTitle}`;
      document.getElementById('share-linkedin').href = `https://www.linkedin.com/sharing/share-offsite/?url=${pageUrl}`;
    }

    window.addEventListener('load', setShareLinks);
  </script>
</body>
</html>
